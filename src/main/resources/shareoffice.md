背景

我們正在構建一個共享辦公室租賃系統。此系統將允許用戶預訂辦公空間、管理租賃合同和處理支付流程。為了確保我們的開發過程與業務需求高度對齊，我們決定使用行為驅動開發（BDD）方法，同時結合領域驅動設計（DDD）中的領域事件來實現業務邏輯

需求描述
用例：預訂辦公室
需求概述

用戶可以在系統中查詢可用的辦公室並進行預訂。每次預訂成功後，系統將觸發一個領域事件，以便後續處理相關業務邏輯，例如通知財務部門生成發票。
需求細節

場景1：查詢可用辦公室

    Given: 當前系統中有多個辦公室
    When: 用戶查詢特定日期範圍內的可用辦公室
    Then: 系統顯示在該日期範圍內所有可用的辦公室列表

場景2：預訂辦公室

    Given: 用戶選擇了一個可用的辦公室
    And: 用戶提供了有效的支付信息
    When: 用戶提交預訂請求
    Then: 系統創建一個新的預訂記錄
    And: 系統觸發 "OfficeBooked" 領域事件

領域事件
事件名稱：OfficeBooked

    描述: 當用戶成功預訂一個辦公室時觸發此事件
    屬性:
        bookingId: 預訂ID
        officeId: 辦公室ID
        userId: 用戶ID
        startDate: 租賃開始日期
        endDate: 租賃結束日期

事件處理

    財務部門
        動作: 接收到 OfficeBooked 事件後，生成對應的發票
        系統: 觸發發票生成服務
    通知服務
        動作: 發送確認郵件給用戶
        系統: 使用郵件服務發送郵件